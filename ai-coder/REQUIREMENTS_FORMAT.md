# Requirements File Format

**Location:** `./reqs/*.md`

**Purpose:** Testable requirement flows generated by AI from README/specs

---

## File Structure

Each requirement file is markdown organized as startup-to-shutdown flows:

```markdown
# Title

Brief introduction paragraph.

## $REQ_CATEGORY_001: Requirement title
**Source:** ./specs/FEATURE.md (Section: "Feature Name")

Requirement description. Can be multiple paragraphs.

Specify observable behavior, constraints, or testable conditions.

## $REQ_CATEGORY_002: Another requirement
**Source:** ./README.md (Section: "Build Output")

More requirement text...
```

---

## Source Attribution

**Required:** Every requirement MUST cite its source from README/specs

**Format:** `**Source:** ./specs/FILE.md (Section: "Section Name")`

**Placement:** Immediately after the requirement header, before the description

**Examples:**
- `**Source:** ./README.md (Section: "Build Output")`
- `**Source:** ./specs/STARTUP.md (Section: "Server Initialization")`
- `**Source:** ./specs/ENDPOINTS.md (Section: "HTTP GET /health")`

---

## Requirement ID Format

**Pattern:** `$REQ_CATEGORY_NNN`

- `CATEGORY` - Uppercase letters, digits, and underscores (e.g., BUILD, STARTUP, HTTP, SOAP)
- `NNN` - 3-digit number (001, 002, ..., 099, 100, ...)
- Optional suffix allowed with underscores (e.g., `$REQ_BUILD_001_A`)

**Format:** Must start with `$REQ_` followed by uppercase letters, digits, and underscores only

**Examples:**
- `$REQ_BUILD_001`
- `$REQ_STARTUP_042`
- `$REQ_HTTP_003`
- `$REQ_BUILD_001_A` (with suffix)

---

## File Naming

**During generation (P1.2):** Files can have any name (e.g., `build.md`, `startup.md`)

**After ordering (P1.9):** Files get numeric prefixes by dependency order:
- `00_build.md` - Build requirements (most foundational)
- `01_startup.md` - Startup/lifecycle requirements
- `02_endpoints.md` - Core functionality
- etc.

---

## Definition vs Reference

**Definition:** First occurrence with `## $REQ_ID: Title` header

**Reference:** Any other mention of `$REQ_ID` in requirements, tests, or code

**Rule:** Each `$REQ_ID` defined exactly once (enforced by fix-duplicate-req-ids.py at P1.5)

---

## Common Patterns

**Testable requirement:**
```markdown
## $REQ_BUILD_001: Output executable file
**Source:** ./README.md (Section: "Build Output")

After build completes, ./released/ MUST contain MyApp.exe
```

**Constraint requirement:**
```markdown
## $REQ_PERF_001: Request timeout
**Source:** ./specs/PERFORMANCE.md (Section: "Timeouts")

HTTP requests MUST timeout after 30 seconds
```

**Configuration requirement:**
```markdown
## $REQ_CONFIG_001: Load settings file
**Source:** ./specs/STARTUP.md (Section: "Configuration Loading")

On startup, system MUST read config.json from working directory
```
